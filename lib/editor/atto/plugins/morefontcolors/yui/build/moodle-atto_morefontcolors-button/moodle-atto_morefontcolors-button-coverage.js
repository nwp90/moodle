if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_morefontcolors-button/moodle-atto_morefontcolors-button.js']) {
   __coverage__['build/moodle-atto_morefontcolors-button/moodle-atto_morefontcolors-button.js'] = {"path":"build/moodle-atto_morefontcolors-button/moodle-atto_morefontcolors-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":45},"end":{"line":1,"column":64}}},"2":{"name":"(anonymous_2)","line":89,"loc":{"start":{"line":89,"column":17},"end":{"line":89,"column":34}}},"3":{"name":"(anonymous_3)","line":92,"loc":{"start":{"line":92,"column":29},"end":{"line":92,"column":46}}},"4":{"name":"(anonymous_4)","line":138,"loc":{"start":{"line":138,"column":18},"end":{"line":138,"column":37}}},"5":{"name":"(anonymous_5)","line":155,"loc":{"start":{"line":155,"column":18},"end":{"line":155,"column":29}}},"6":{"name":"(anonymous_6)","line":173,"loc":{"start":{"line":173,"column":49},"end":{"line":173,"column":61}}},"7":{"name":"(anonymous_7)","line":196,"loc":{"start":{"line":196,"column":26},"end":{"line":196,"column":37}}},"8":{"name":"(anonymous_8)","line":197,"loc":{"start":{"line":197,"column":66},"end":{"line":197,"column":79}}},"9":{"name":"(anonymous_9)","line":226,"loc":{"start":{"line":226,"column":25},"end":{"line":226,"column":37}}},"10":{"name":"(anonymous_10)","line":229,"loc":{"start":{"line":229,"column":27},"end":{"line":229,"column":40}}},"11":{"name":"(anonymous_11)","line":234,"loc":{"start":{"line":234,"column":27},"end":{"line":234,"column":47}}},"12":{"name":"(anonymous_12)","line":245,"loc":{"start":{"line":245,"column":26},"end":{"line":245,"column":40}}},"13":{"name":"(anonymous_13)","line":256,"loc":{"start":{"line":256,"column":36},"end":{"line":256,"column":48}}},"14":{"name":"(anonymous_14)","line":268,"loc":{"start":{"line":268,"column":29},"end":{"line":268,"column":40}}},"15":{"name":"(anonymous_15)","line":292,"loc":{"start":{"line":292,"column":33},"end":{"line":292,"column":44}}},"16":{"name":"(anonymous_16)","line":296,"loc":{"start":{"line":296,"column":31},"end":{"line":296,"column":42}}},"17":{"name":"(anonymous_17)","line":300,"loc":{"start":{"line":300,"column":31},"end":{"line":300,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":337,"column":16}},"2":{"start":{"line":41,"column":0},"end":{"line":68,"column":14}},"3":{"start":{"line":69,"column":0},"end":{"line":334,"column":3}},"4":{"start":{"line":90,"column":8},"end":{"line":90,"column":23}},"5":{"start":{"line":91,"column":8},"end":{"line":91,"column":40}},"6":{"start":{"line":92,"column":8},"end":{"line":110,"column":11}},"7":{"start":{"line":93,"column":12},"end":{"line":109,"column":13}},"8":{"start":{"line":94,"column":16},"end":{"line":94,"column":54}},"9":{"start":{"line":95,"column":16},"end":{"line":95,"column":37}},"10":{"start":{"line":96,"column":16},"end":{"line":104,"column":17}},"11":{"start":{"line":97,"column":20},"end":{"line":97,"column":54}},"12":{"start":{"line":98,"column":20},"end":{"line":103,"column":21}},"13":{"start":{"line":99,"column":24},"end":{"line":102,"column":62}},"14":{"start":{"line":105,"column":16},"end":{"line":108,"column":19}},"15":{"start":{"line":111,"column":8},"end":{"line":117,"column":9}},"16":{"start":{"line":112,"column":12},"end":{"line":116,"column":15}},"17":{"start":{"line":118,"column":8},"end":{"line":127,"column":11}},"18":{"start":{"line":139,"column":8},"end":{"line":145,"column":9}},"19":{"start":{"line":140,"column":12},"end":{"line":140,"column":32}},"20":{"start":{"line":142,"column":12},"end":{"line":144,"column":15}},"21":{"start":{"line":156,"column":8},"end":{"line":161,"column":15}},"22":{"start":{"line":163,"column":8},"end":{"line":163,"column":65}},"23":{"start":{"line":165,"column":8},"end":{"line":167,"column":12}},"24":{"start":{"line":169,"column":8},"end":{"line":169,"column":58}},"25":{"start":{"line":171,"column":8},"end":{"line":171,"column":36}},"26":{"start":{"line":173,"column":8},"end":{"line":187,"column":17}},"27":{"start":{"line":174,"column":12},"end":{"line":174,"column":31}},"28":{"start":{"line":176,"column":12},"end":{"line":178,"column":22}},"29":{"start":{"line":180,"column":12},"end":{"line":180,"column":87}},"30":{"start":{"line":182,"column":12},"end":{"line":182,"column":66}},"31":{"start":{"line":184,"column":12},"end":{"line":186,"column":15}},"32":{"start":{"line":197,"column":8},"end":{"line":306,"column":7}},"33":{"start":{"line":198,"column":12},"end":{"line":198,"column":85}},"34":{"start":{"line":199,"column":12},"end":{"line":278,"column":14}},"35":{"start":{"line":227,"column":16},"end":{"line":227,"column":42}},"36":{"start":{"line":230,"column":16},"end":{"line":232,"column":17}},"37":{"start":{"line":231,"column":20},"end":{"line":231,"column":35}},"38":{"start":{"line":235,"column":16},"end":{"line":237,"column":17}},"39":{"start":{"line":236,"column":20},"end":{"line":236,"column":69}},"40":{"start":{"line":238,"column":16},"end":{"line":240,"column":17}},"41":{"start":{"line":239,"column":20},"end":{"line":239,"column":69}},"42":{"start":{"line":241,"column":16},"end":{"line":243,"column":17}},"43":{"start":{"line":242,"column":20},"end":{"line":242,"column":54}},"44":{"start":{"line":246,"column":16},"end":{"line":248,"column":17}},"45":{"start":{"line":247,"column":20},"end":{"line":247,"column":45}},"46":{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},"47":{"start":{"line":250,"column":20},"end":{"line":250,"column":45}},"48":{"start":{"line":252,"column":15},"end":{"line":254,"column":17}},"49":{"start":{"line":253,"column":20},"end":{"line":253,"column":45}},"50":{"start":{"line":257,"column":16},"end":{"line":258,"column":29}},"51":{"start":{"line":259,"column":16},"end":{"line":266,"column":16}},"52":{"start":{"line":260,"column":20},"end":{"line":260,"column":62}},"53":{"start":{"line":261,"column":20},"end":{"line":265,"column":23}},"54":{"start":{"line":269,"column":16},"end":{"line":273,"column":57}},"55":{"start":{"line":274,"column":16},"end":{"line":274,"column":46}},"56":{"start":{"line":275,"column":16},"end":{"line":275,"column":46}},"57":{"start":{"line":276,"column":16},"end":{"line":276,"column":61}},"58":{"start":{"line":277,"column":16},"end":{"line":277,"column":40}},"59":{"start":{"line":280,"column":8},"end":{"line":280,"column":42}},"60":{"start":{"line":281,"column":8},"end":{"line":281,"column":43}},"61":{"start":{"line":282,"column":8},"end":{"line":282,"column":59}},"62":{"start":{"line":284,"column":8},"end":{"line":284,"column":42}},"63":{"start":{"line":285,"column":8},"end":{"line":285,"column":43}},"64":{"start":{"line":286,"column":8},"end":{"line":286,"column":59}},"65":{"start":{"line":288,"column":8},"end":{"line":288,"column":42}},"66":{"start":{"line":289,"column":8},"end":{"line":289,"column":43}},"67":{"start":{"line":290,"column":8},"end":{"line":290,"column":59}},"68":{"start":{"line":292,"column":8},"end":{"line":294,"column":11}},"69":{"start":{"line":293,"column":12},"end":{"line":293,"column":29}},"70":{"start":{"line":296,"column":8},"end":{"line":298,"column":11}},"71":{"start":{"line":297,"column":12},"end":{"line":297,"column":29}},"72":{"start":{"line":300,"column":8},"end":{"line":303,"column":11}},"73":{"start":{"line":301,"column":12},"end":{"line":301,"column":57}},"74":{"start":{"line":302,"column":12},"end":{"line":302,"column":29}},"75":{"start":{"line":305,"column":8},"end":{"line":305,"column":25}}},"branchMap":{"1":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":93,"column":12}},{"start":{"line":93,"column":12},"end":{"line":93,"column":12}}]},"2":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":20},"end":{"line":98,"column":20}},{"start":{"line":98,"column":20},"end":{"line":98,"column":20}}]},"3":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":8}},{"start":{"line":111,"column":8},"end":{"line":111,"column":8}}]},"4":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":8}},{"start":{"line":139,"column":8},"end":{"line":139,"column":8}}]},"5":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":16},"end":{"line":230,"column":16}},{"start":{"line":230,"column":16},"end":{"line":230,"column":16}}]},"6":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":16},"end":{"line":235,"column":16}},{"start":{"line":235,"column":16},"end":{"line":235,"column":16}}]},"7":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":16},"end":{"line":238,"column":16}},{"start":{"line":238,"column":16},"end":{"line":238,"column":16}}]},"8":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":16},"end":{"line":241,"column":16}},{"start":{"line":241,"column":16},"end":{"line":241,"column":16}}]},"9":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":16},"end":{"line":246,"column":16}},{"start":{"line":246,"column":16},"end":{"line":246,"column":16}}]},"10":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":16},"end":{"line":249,"column":16}},{"start":{"line":249,"column":16},"end":{"line":249,"column":16}}]},"11":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":15},"end":{"line":252,"column":15}},{"start":{"line":252,"column":15},"end":{"line":252,"column":15}}]},"12":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":16},"end":{"line":259,"column":16}},{"start":{"line":259,"column":16},"end":{"line":259,"column":16}}]}},"code":["(function () { YUI.add('moodle-atto_morefontcolors-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * Atto text editor integration version file."," *"," * @package    atto_morefontcolors"," * @copyright  2014 Université de Lausanne"," * @author     Nicolas Dunand <nicolas.dunand@unil.ch>"," * @author     Rossiani Wijaya  <rwijaya@moodle.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * @module moodle-atto_morefontcolors-button"," */","","/**"," * Atto text editor morefontcolors plugin."," *"," * @namespace M.atto_morefontcolors"," * @class button"," * @extends M.editor_atto.EditorPlugin"," */","","","var TEMPLATE = '' +","    '<form id=\"atto_morefontcolors_dialogue\">' +","        '<div class=\"picker\">' +","            '<div id=\"atto_morefontcolors_dialogue_hue-dial\"></div>' +","            '<div class=\"sliders\">' +","                '<div id=\"atto_morefontcolors_dialogue_sat-slider\"><strong>{{get_string \"saturation\" component}}<span></span></strong></div>' +","                '<div id=\"atto_morefontcolors_dialogue_lum-slider\"><strong>{{get_string \"luminance\" component}}<span></span></strong></div>' +","            '</div>' +","            '<div class=\"color\"></div>' +","        '</div>' +","        '<div class=\"yui3-g picker-output\">' +","            '<div class=\"yui3-u-1-3\">' +","                '<strong>{{get_string \"hexadecimal\" component}}</strong>' +","                '<input type=\"text\" id=\"atto_morefontcolors_dialogue_hex-output\">' +","            '</div>' +","            '<div class=\"yui3-u-1-3\">' +","               '<strong>{{get_string \"rgb\" component}}</strong>' +","               '<input type=\"text\" id=\"atto_morefontcolors_dialogue_rgb-output\">' +","            '</div>' +","            '<div class=\"yui3-u-1-3\">' +","                '<strong>{{get_string \"hsl\" component}}</strong>' +","                '<input type=\"text\" id=\"atto_morefontcolors_dialogue_hsl-output\">' +","            '</div>' +","        '</div>' +","        '<div class=\"mdl-align\">' +","            '<button type=\"submit\" class=\"submit\">{{get_string \"submit\" component}}</button>' +","        '</div>' +","    '</form>';","Y.namespace('M.atto_morefontcolors').Button = Y.Base.create('button', Y.M.editor_atto.EditorPlugin, [], {","    /**","     * A reference to the current selection at the time that the dialogue","     * was opened.","     *","     * @property _currentSelection","     * @type Range","     * @private","     */","    _currentSelection: null,","","    /**","     * A reference to the HTMl of the dialuge content","     *","     * @property _content","     * @type String","     * @private","     */","    _content: null,","","    initializer: function(config) {","        var items = [];","        var colors = this.get('colors');","        Y.Array.each(colors, function(colors) {","            if (colors.trim()) {","                var color_array = colors.split(/\\s+/);","                var stringOfDiv = \"\";","                for (var i = 0; i < color_array.length; i++) {","                    var color = color_array[i].trim();","                    if (/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color)) {","                        stringOfDiv = stringOfDiv +","                        '<div style=\"width: 20px; margin-right: 5px; height: 20px; border: 1px solid #CCC; background-color: ' +","                        color +","                        '\" data-color=\"' + color + '\"></div>';","                    }","                }","                items.push({","                    text: stringOfDiv,","                    callback: this._changeStyle","                });","            }","        });","        if (config.allowcustom === '1') {","            items.push({","                text: '<div style=\"width: 20px; height: 20px; border: 1px solid #CCC;\" id=\"atto_morefontcolors_customicon\"></div>',","                callbackArgs: 'custom',","                callback: this._changeStyle","            });","        }","        this.addToolbarMenu({","            icon: 'e/text_color',","            overlayWidth: '4',","            menuColor: '#333333',","            globalItemConfig: {","                inlineFormat: true,","                callback: this._changeStyle","            },","            items: items","        });","    },","","    /**","     * Change the font color to the specified color.","     *","     * @method _changeStyle","     * @param {EventFacade} e","     * @param {string} color The new font color","     * @private","     */","    _changeStyle: function(e, color) {","        if (color === 'custom') {","            this._customColor();","        } else {","            this.get('host').formatSelectionInlineStyle({","                color: e.target.getAttribute(\"data-color\")","            });","        }","    },","","    /**","     * Change the font color to the custom color","     *","     * @method _customColor","     * @param {EventFacade} e","     * @private","     */","    _customColor: function() {","        var template = Y.Handlebars.compile(TEMPLATE),","            dialogue = this.getDialogue({","                headerContent: M.util.get_string('customcolor', \"atto_morefontcolors\"),","                width: '470px',","                focusAfterHide: true","            });","","        this._currentSelection = this.get('host').getSelection();","","        this._content = Y.Node.create(template({","            component: \"atto_morefontcolors\"","        }));","","        dialogue.set('bodyContent', this._content).show();","","        this._initiateColorPicker();","","        this._content.one('.submit').on('click', function(e) {","            e.preventDefault();","            // Hide the dialogue.","            this.getDialogue({","                focusAfterHide: null","            }).hide();","","            var color = Y.one('#atto_morefontcolors_dialogue_rgb-output').get('value');","","            this.get('host').setSelection(this._currentSelection);","","            this.get('host').formatSelectionInlineStyle({","                color: color","            });","        }, this);","    },","","    /**","     * Initialize the color picker dialogue","     *","     * @method _initalizeColorPicker","     * @private","     */","    _initiateColorPicker: function() {","        YUI().use('dial', 'slider', 'event-valuechange', 'color', function (Y) {","            Y.one('#atto_morefontcolors_dialogue .picker').addClass('yui3-skin-sam');","            var hue = new Y.Dial({","                min: 0,","                max: 360,","                stepsPerRevolution: 360,","                continuous: true,","                centerButtonDiameter: 0.4,","                render: '#atto_morefontcolors_dialogue_hue-dial'","            }),","            sat = new Y.Slider({","                min: 0,","                max: 100,","                value: 100,","                render: '#atto_morefontcolors_dialogue_sat-slider'","            }),","            lum = new Y.Slider({","                min: 0,","                max: 100,","                value: 50,","                render: '#atto_morefontcolors_dialogue_lum-slider'","            }),","            satValue = Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_sat-slider span'),","            lumValue = Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_lum-slider span'),","            color = Y.one('#atto_morefontcolors_dialogue .color'),","            hexOutput = Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hex-output'),","            rgbOutput = Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_rgb-output'),","            hslOutput = Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hsl-output'),","            focused = null,","            setFocused = function(e) {","                focused = e.currentTarget;","            },","            unsetFocused = function (e) {","                if (focused === e.currentTarget) {","                    focused = null;","                }","            },","            updateOutput = function(hslString) {","                if (hexOutput !== focused) {","                    hexOutput.set('value', Y.Color.toHex(hslString));","                }","                if (rgbOutput !== focused) {","                    rgbOutput.set('value', Y.Color.toRGB(hslString));","                }","                if (hslOutput !== focused) {","                    hslOutput.set('value', hslString);","                }","            },","            setPickerUI = function(hsl) {","                if (typeof hsl.h !== 'undefined') {","                    hue.set('value', +hsl.h);","                }","                if (typeof hsl.s !== 'undefined') {","                    sat.set('value', +hsl.s);","                }","               if (typeof hsl.l !== 'undefined') {","                    lum.set('value', +hsl.l);","                }","            },","            updatePickerFromValue = function(e) {","                var val = e.newVal,","                    hsl = [];","                if (Y.Color.toArray(val)) {","                    hsl = Y.Color.toArray(Y.Color.toHSL(val));","                    setPickerUI({","                        h: hsl[0],","                        s: hsl[1],","                        l: hsl[2]","                    });","               }","            },","            updatePickerUI = function() {","                var h = hue.get('value'),","                    s = sat.get('value'),","                    l = lum.get('value'),","                    hslString = Y.Color.fromArray([h, s, l], Y.Color.TYPES.HSL),","                    hexString = Y.Color.toHex(hslString);","                satValue.set('text', s + '%');","                lumValue.set('text', l + '%');","                color.setStyle('backgroundColor', hexString);","                updateOutput(hslString);","            };","","        hexOutput.on('focus', setFocused);","        hexOutput.on('blur', unsetFocused);","        hexOutput.on('valueChange', updatePickerFromValue);","","        rgbOutput.on('focus', setFocused);","        rgbOutput.on('blur', unsetFocused);","        rgbOutput.on('valueChange', updatePickerFromValue);","","        hslOutput.on('focus', setFocused);","        hslOutput.on('blur', unsetFocused);","        hslOutput.on('valueChange', updatePickerFromValue);","","        hue.after('valueChange', function() {","            updatePickerUI();","        });","","        sat.after('thumbMove', function() {","            updatePickerUI();","        });","","        lum.after('thumbMove', function() {","            lumValue.set('text', lum.get('value') + '%');","            updatePickerUI();","        });","","        updatePickerUI();","    });","    }","}, {","    ATTRS: {","        /**","         * The list of available colors","         *","         * @attribute colors","         * @type array","         * @default {}","         */","        colors: {","            value: {}","        }","    }","}, {","    ATTRS: {","        /**","         * The list of available colors","         *","         * @attribute colors","         * @type array","         * @default {}","         */","        colors: {","            value: {}","        }","    }","});","","","}, '@VERSION@');","","}());"]};
}
var __cov_mj27U1aoNESHODwQ8$IXBg = __coverage__['build/moodle-atto_morefontcolors-button/moodle-atto_morefontcolors-button.js'];
__cov_mj27U1aoNESHODwQ8$IXBg.s['1']++;YUI.add('moodle-atto_morefontcolors-button',function(Y,NAME){__cov_mj27U1aoNESHODwQ8$IXBg.f['1']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['2']++;var TEMPLATE=''+'<form id="atto_morefontcolors_dialogue">'+'<div class="picker">'+'<div id="atto_morefontcolors_dialogue_hue-dial"></div>'+'<div class="sliders">'+'<div id="atto_morefontcolors_dialogue_sat-slider"><strong>{{get_string "saturation" component}}<span></span></strong></div>'+'<div id="atto_morefontcolors_dialogue_lum-slider"><strong>{{get_string "luminance" component}}<span></span></strong></div>'+'</div>'+'<div class="color"></div>'+'</div>'+'<div class="yui3-g picker-output">'+'<div class="yui3-u-1-3">'+'<strong>{{get_string "hexadecimal" component}}</strong>'+'<input type="text" id="atto_morefontcolors_dialogue_hex-output">'+'</div>'+'<div class="yui3-u-1-3">'+'<strong>{{get_string "rgb" component}}</strong>'+'<input type="text" id="atto_morefontcolors_dialogue_rgb-output">'+'</div>'+'<div class="yui3-u-1-3">'+'<strong>{{get_string "hsl" component}}</strong>'+'<input type="text" id="atto_morefontcolors_dialogue_hsl-output">'+'</div>'+'</div>'+'<div class="mdl-align">'+'<button type="submit" class="submit">{{get_string "submit" component}}</button>'+'</div>'+'</form>';__cov_mj27U1aoNESHODwQ8$IXBg.s['3']++;Y.namespace('M.atto_morefontcolors').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_content:null,initializer:function(config){__cov_mj27U1aoNESHODwQ8$IXBg.f['2']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['4']++;var items=[];__cov_mj27U1aoNESHODwQ8$IXBg.s['5']++;var colors=this.get('colors');__cov_mj27U1aoNESHODwQ8$IXBg.s['6']++;Y.Array.each(colors,function(colors){__cov_mj27U1aoNESHODwQ8$IXBg.f['3']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['7']++;if(colors.trim()){__cov_mj27U1aoNESHODwQ8$IXBg.b['1'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['8']++;var color_array=colors.split(/\s+/);__cov_mj27U1aoNESHODwQ8$IXBg.s['9']++;var stringOfDiv='';__cov_mj27U1aoNESHODwQ8$IXBg.s['10']++;for(var i=0;i<color_array.length;i++){__cov_mj27U1aoNESHODwQ8$IXBg.s['11']++;var color=color_array[i].trim();__cov_mj27U1aoNESHODwQ8$IXBg.s['12']++;if(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color)){__cov_mj27U1aoNESHODwQ8$IXBg.b['2'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['13']++;stringOfDiv=stringOfDiv+'<div style="width: 20px; margin-right: 5px; height: 20px; border: 1px solid #CCC; background-color: '+color+'" data-color="'+color+'"></div>';}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['2'][1]++;}}__cov_mj27U1aoNESHODwQ8$IXBg.s['14']++;items.push({text:stringOfDiv,callback:this._changeStyle});}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['1'][1]++;}});__cov_mj27U1aoNESHODwQ8$IXBg.s['15']++;if(config.allowcustom==='1'){__cov_mj27U1aoNESHODwQ8$IXBg.b['3'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['16']++;items.push({text:'<div style="width: 20px; height: 20px; border: 1px solid #CCC;" id="atto_morefontcolors_customicon"></div>',callbackArgs:'custom',callback:this._changeStyle});}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['3'][1]++;}__cov_mj27U1aoNESHODwQ8$IXBg.s['17']++;this.addToolbarMenu({icon:'e/text_color',overlayWidth:'4',menuColor:'#333333',globalItemConfig:{inlineFormat:true,callback:this._changeStyle},items:items});},_changeStyle:function(e,color){__cov_mj27U1aoNESHODwQ8$IXBg.f['4']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['18']++;if(color==='custom'){__cov_mj27U1aoNESHODwQ8$IXBg.b['4'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['19']++;this._customColor();}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['4'][1]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['20']++;this.get('host').formatSelectionInlineStyle({color:e.target.getAttribute('data-color')});}},_customColor:function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['5']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['21']++;var template=Y.Handlebars.compile(TEMPLATE),dialogue=this.getDialogue({headerContent:M.util.get_string('customcolor','atto_morefontcolors'),width:'470px',focusAfterHide:true});__cov_mj27U1aoNESHODwQ8$IXBg.s['22']++;this._currentSelection=this.get('host').getSelection();__cov_mj27U1aoNESHODwQ8$IXBg.s['23']++;this._content=Y.Node.create(template({component:'atto_morefontcolors'}));__cov_mj27U1aoNESHODwQ8$IXBg.s['24']++;dialogue.set('bodyContent',this._content).show();__cov_mj27U1aoNESHODwQ8$IXBg.s['25']++;this._initiateColorPicker();__cov_mj27U1aoNESHODwQ8$IXBg.s['26']++;this._content.one('.submit').on('click',function(e){__cov_mj27U1aoNESHODwQ8$IXBg.f['6']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['27']++;e.preventDefault();__cov_mj27U1aoNESHODwQ8$IXBg.s['28']++;this.getDialogue({focusAfterHide:null}).hide();__cov_mj27U1aoNESHODwQ8$IXBg.s['29']++;var color=Y.one('#atto_morefontcolors_dialogue_rgb-output').get('value');__cov_mj27U1aoNESHODwQ8$IXBg.s['30']++;this.get('host').setSelection(this._currentSelection);__cov_mj27U1aoNESHODwQ8$IXBg.s['31']++;this.get('host').formatSelectionInlineStyle({color:color});},this);},_initiateColorPicker:function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['7']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['32']++;YUI().use('dial','slider','event-valuechange','color',function(Y){__cov_mj27U1aoNESHODwQ8$IXBg.f['8']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['33']++;Y.one('#atto_morefontcolors_dialogue .picker').addClass('yui3-skin-sam');__cov_mj27U1aoNESHODwQ8$IXBg.s['34']++;var hue=new Y.Dial({min:0,max:360,stepsPerRevolution:360,continuous:true,centerButtonDiameter:0.4,render:'#atto_morefontcolors_dialogue_hue-dial'}),sat=new Y.Slider({min:0,max:100,value:100,render:'#atto_morefontcolors_dialogue_sat-slider'}),lum=new Y.Slider({min:0,max:100,value:50,render:'#atto_morefontcolors_dialogue_lum-slider'}),satValue=Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_sat-slider span'),lumValue=Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_lum-slider span'),color=Y.one('#atto_morefontcolors_dialogue .color'),hexOutput=Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hex-output'),rgbOutput=Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_rgb-output'),hslOutput=Y.one('#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hsl-output'),focused=null,setFocused=function(e){__cov_mj27U1aoNESHODwQ8$IXBg.f['9']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['35']++;focused=e.currentTarget;},unsetFocused=function(e){__cov_mj27U1aoNESHODwQ8$IXBg.f['10']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['36']++;if(focused===e.currentTarget){__cov_mj27U1aoNESHODwQ8$IXBg.b['5'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['37']++;focused=null;}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['5'][1]++;}},updateOutput=function(hslString){__cov_mj27U1aoNESHODwQ8$IXBg.f['11']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['38']++;if(hexOutput!==focused){__cov_mj27U1aoNESHODwQ8$IXBg.b['6'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['39']++;hexOutput.set('value',Y.Color.toHex(hslString));}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['6'][1]++;}__cov_mj27U1aoNESHODwQ8$IXBg.s['40']++;if(rgbOutput!==focused){__cov_mj27U1aoNESHODwQ8$IXBg.b['7'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['41']++;rgbOutput.set('value',Y.Color.toRGB(hslString));}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['7'][1]++;}__cov_mj27U1aoNESHODwQ8$IXBg.s['42']++;if(hslOutput!==focused){__cov_mj27U1aoNESHODwQ8$IXBg.b['8'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['43']++;hslOutput.set('value',hslString);}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['8'][1]++;}},setPickerUI=function(hsl){__cov_mj27U1aoNESHODwQ8$IXBg.f['12']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['44']++;if(typeof hsl.h!=='undefined'){__cov_mj27U1aoNESHODwQ8$IXBg.b['9'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['45']++;hue.set('value',+hsl.h);}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['9'][1]++;}__cov_mj27U1aoNESHODwQ8$IXBg.s['46']++;if(typeof hsl.s!=='undefined'){__cov_mj27U1aoNESHODwQ8$IXBg.b['10'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['47']++;sat.set('value',+hsl.s);}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['10'][1]++;}__cov_mj27U1aoNESHODwQ8$IXBg.s['48']++;if(typeof hsl.l!=='undefined'){__cov_mj27U1aoNESHODwQ8$IXBg.b['11'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['49']++;lum.set('value',+hsl.l);}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['11'][1]++;}},updatePickerFromValue=function(e){__cov_mj27U1aoNESHODwQ8$IXBg.f['13']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['50']++;var val=e.newVal,hsl=[];__cov_mj27U1aoNESHODwQ8$IXBg.s['51']++;if(Y.Color.toArray(val)){__cov_mj27U1aoNESHODwQ8$IXBg.b['12'][0]++;__cov_mj27U1aoNESHODwQ8$IXBg.s['52']++;hsl=Y.Color.toArray(Y.Color.toHSL(val));__cov_mj27U1aoNESHODwQ8$IXBg.s['53']++;setPickerUI({h:hsl[0],s:hsl[1],l:hsl[2]});}else{__cov_mj27U1aoNESHODwQ8$IXBg.b['12'][1]++;}},updatePickerUI=function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['14']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['54']++;var h=hue.get('value'),s=sat.get('value'),l=lum.get('value'),hslString=Y.Color.fromArray([h,s,l],Y.Color.TYPES.HSL),hexString=Y.Color.toHex(hslString);__cov_mj27U1aoNESHODwQ8$IXBg.s['55']++;satValue.set('text',s+'%');__cov_mj27U1aoNESHODwQ8$IXBg.s['56']++;lumValue.set('text',l+'%');__cov_mj27U1aoNESHODwQ8$IXBg.s['57']++;color.setStyle('backgroundColor',hexString);__cov_mj27U1aoNESHODwQ8$IXBg.s['58']++;updateOutput(hslString);};__cov_mj27U1aoNESHODwQ8$IXBg.s['59']++;hexOutput.on('focus',setFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['60']++;hexOutput.on('blur',unsetFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['61']++;hexOutput.on('valueChange',updatePickerFromValue);__cov_mj27U1aoNESHODwQ8$IXBg.s['62']++;rgbOutput.on('focus',setFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['63']++;rgbOutput.on('blur',unsetFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['64']++;rgbOutput.on('valueChange',updatePickerFromValue);__cov_mj27U1aoNESHODwQ8$IXBg.s['65']++;hslOutput.on('focus',setFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['66']++;hslOutput.on('blur',unsetFocused);__cov_mj27U1aoNESHODwQ8$IXBg.s['67']++;hslOutput.on('valueChange',updatePickerFromValue);__cov_mj27U1aoNESHODwQ8$IXBg.s['68']++;hue.after('valueChange',function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['15']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['69']++;updatePickerUI();});__cov_mj27U1aoNESHODwQ8$IXBg.s['70']++;sat.after('thumbMove',function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['16']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['71']++;updatePickerUI();});__cov_mj27U1aoNESHODwQ8$IXBg.s['72']++;lum.after('thumbMove',function(){__cov_mj27U1aoNESHODwQ8$IXBg.f['17']++;__cov_mj27U1aoNESHODwQ8$IXBg.s['73']++;lumValue.set('text',lum.get('value')+'%');__cov_mj27U1aoNESHODwQ8$IXBg.s['74']++;updatePickerUI();});__cov_mj27U1aoNESHODwQ8$IXBg.s['75']++;updatePickerUI();});}},{ATTRS:{colors:{value:{}}}},{ATTRS:{colors:{value:{}}}});},'@VERSION@');
