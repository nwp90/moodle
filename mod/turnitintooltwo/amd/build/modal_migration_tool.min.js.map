{"version":3,"sources":["../src/modal_migration_tool.js"],"names":["define","$","Notification","CustomEvents","Modal","ModalRegistry","ModalEvents","Config","MigrationToolMigrate","registered","SELECTORS","MIGRATE_BUTTON","CANCEL_BUTTON","ModalMigrationTool","root","call","TYPE","prototype","Object","create","constructor","registerEventListeners","getModal","on","events","activate","hide","show","migration_tool_migrate","data","bind","e","cancelEvent","Event","cancel","getRoot","trigger","isDefaultPrevented","originalEvent","preventDefault","register"],"mappings":"AASAA,OAAM,4CAAC,CACC,QADD,CAEC,mBAFD,CAGC,gCAHD,CAIC,YAJD,CAKC,qBALD,CAMC,mBAND,CAOC,aAPD,CAQC,4CARD,CAAD,CAUF,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAwCC,CAAxC,CAA+CC,CAA/C,CAA8DC,CAA9D,CAA2EC,CAA3E,CAAmFC,CAAnF,CAAyG,IAEjGC,CAAAA,CAAU,GAFuF,CAGjGC,CAAS,CAAG,CACZC,cAAc,CAAE,sCADJ,CAEZC,aAAa,CAAE,0BAFH,CAHqF,CAajGC,CAAkB,CAAG,SAASC,CAAT,CAAe,CACpCV,CAAK,CAACW,IAAN,CAAW,IAAX,CAAiBD,CAAjB,CACH,CAfoG,CAiBrGD,CAAkB,CAACG,IAAnB,CAA0B,oCAA1B,CACAH,CAAkB,CAACI,SAAnB,CAA+BC,MAAM,CAACC,MAAP,CAAcf,CAAK,CAACa,SAApB,CAA/B,CACAJ,CAAkB,CAACI,SAAnB,CAA6BG,WAA7B,CAA2CP,CAA3C,CAOAA,CAAkB,CAACI,SAAnB,CAA6BI,sBAA7B,CAAsD,UAAW,CAE7DjB,CAAK,CAACa,SAAN,CAAgBI,sBAAhB,CAAuCN,IAAvC,CAA4C,IAA5C,EAGA,KAAKO,QAAL,GAAgBC,EAAhB,CAAmBpB,CAAY,CAACqB,MAAb,CAAoBC,QAAvC,CAAiDf,CAAS,CAACC,cAA3D,CAA2E,UAAW,CAClFV,CAAC,CAAC,eAAD,CAAD,CAAmByB,IAAnB,GACAzB,CAAC,CAAC,YAAD,CAAD,CAAgB0B,IAAhB,GAEAnB,CAAoB,CAACoB,sBAArB,CACI3B,CAAC,CAAC,eAAD,CAAD,CAAmB4B,IAAnB,CAAwB,UAAxB,CADJ,CAEI5B,CAAC,CAAC,eAAD,CAAD,CAAmB4B,IAAnB,CAAwB,gBAAxB,CAFJ,CAIH,CAR0E,CAQzEC,IARyE,CAQpE,IARoE,CAA3E,EAWA,KAAKR,QAAL,GAAgBC,EAAhB,CAAmBpB,CAAY,CAACqB,MAAb,CAAoBC,QAAvC,CAAiDf,CAAS,CAACE,aAA3D,CAA0E,SAASmB,CAAT,CAAYF,CAAZ,CAAkB,CAExF,GAAIG,CAAAA,CAAW,CAAG/B,CAAC,CAACgC,KAAF,CAAQ3B,CAAW,CAAC4B,MAApB,CAAlB,CACA,KAAKC,OAAL,GAAeC,OAAf,CAAuBJ,CAAvB,CAAoC,IAApC,EAEA,GAAI,CAACA,CAAW,CAACK,kBAAZ,EAAL,CAAuC,CACnC,KAAKX,IAAL,GACAG,CAAI,CAACS,aAAL,CAAmBC,cAAnB,EACH,CACJ,CATyE,CASxET,IATwE,CASnE,IATmE,CAA1E,CAUH,CA1BD,CA8BA,GAAI,CAACrB,CAAL,CAAiB,CACbJ,CAAa,CAACmC,QAAd,CAAuB3B,CAAkB,CAACG,IAA1C,CAAgDH,CAAhD,CAAoE,0CAApE,EACAJ,CAAU,GACb,CAED,MAAOI,CAAAA,CACV,CAxEC,CAAN","sourcesContent":["/**\n * Javascript controller for the migration tool modal.\n *\n * @package   turnitintooltwo\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module mod_turnitintooltwo/migration_tool\n */\n\ndefine([\n        'jquery',\n        'core/notification',\n        'core/custom_interaction_events',\n        'core/modal',\n        'core/modal_registry',\n        'core/modal_events',\n        'core/config',\n        'mod_turnitintooltwo/migration_tool_migrate'\n    ],\n    function($, Notification, CustomEvents, Modal, ModalRegistry, ModalEvents, Config, MigrationToolMigrate) {\n\n        var registered = false;\n        var SELECTORS = {\n            MIGRATE_BUTTON: '[data-action=\"migrate-assignment\"]',\n            CANCEL_BUTTON: '[data-action=\"cancel\"]'\n        };\n\n        /**\n         * Constructor for the Modal.\n         *\n         * @param {object} root The root jQuery element for the modal\n         */\n        var ModalMigrationTool = function(root) {\n            Modal.call(this, root);\n        };\n\n        ModalMigrationTool.TYPE = 'mod_turnitintooltwo-migration_tool';\n        ModalMigrationTool.prototype = Object.create(Modal.prototype);\n        ModalMigrationTool.prototype.constructor = ModalMigrationTool;\n\n        /**\n         * Set up all of the event handling for the modal.\n         *\n         * @method registerEventListeners\n         */\n        ModalMigrationTool.prototype.registerEventListeners = function() {\n            // Apply parent event listeners.\n            Modal.prototype.registerEventListeners.call(this);\n\n            // Fired during a manual migration when clicking to migrate the assignment. Initiate the migration process.\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.MIGRATE_BUTTON, function() {\n                $('.asktomigrate').hide();\n                $('.migrating').show();\n\n                MigrationToolMigrate.migration_tool_migrate(\n                    $(\"#migrate_type\").data(\"courseid\"),\n                    $(\"#migrate_type\").data(\"turnitintoolid\")\n                );\n            }.bind(this));\n\n            // On cancel, then hide the modal.\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.CANCEL_BUTTON, function(e, data) {\n\n                var cancelEvent = $.Event(ModalEvents.cancel);\n                this.getRoot().trigger(cancelEvent, this);\n\n                if (!cancelEvent.isDefaultPrevented()) {\n                    this.hide();\n                    data.originalEvent.preventDefault();\n                }\n            }.bind(this));\n        };\n\n        // Automatically register with the modal registry the first time this module is imported so that\n        // you can create modals of this type using the modal factory.\n        if (!registered) {\n            ModalRegistry.register(ModalMigrationTool.TYPE, ModalMigrationTool, 'mod_turnitintooltwo/modal_migration_tool');\n            registered = true;\n        }\n\n        return ModalMigrationTool;\n    }\n);"],"file":"modal_migration_tool.min.js"}