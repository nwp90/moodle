define ("qtype_pmatch/updater",["jquery"],function(a){var b={baseUrl:"",sessKey:"",qid:"",headerCheckboxChecked:!0,init:function init(){var c=a("#attemptsform").attr("action");b.baseUrl=c.replace("testquestion.php","api/updater.php");b.sessKey=a("#attemptsform input[name=\"sesskey\"]").val();b.qid=a("#attemptsform input[name=\"id\"]").val();a(document).on("click",".updater-ef",function(){var c=a(this).data("id");b.update(c);return!1});a(document).on("keypress","#tablecontainer :checkbox",function(b){if(13==(b.keyCode?b.keyCode:b.which)){b.preventDefault();a(this).trigger("click")}});a("#tqheadercheckbox").click(function(){if(b.headerCheckboxChecked){a(this).attr("title",M.util.get_string("deselectall","moodle"));b.headerCheckboxChecked=!1}else{a(this).attr("title",M.util.get_string("selectall","moodle"));b.headerCheckboxChecked=!0}a("#tablecontainer :checkbox").each(function(){this.checked=!b.headerCheckboxChecked});a(this).prop("checked",!1)})},update:function update(d){var c=a("#updater-ef_"+d).text(),e=0;if("1"===c){e=0}else{e=1}var f={qid:b.qid,rid:d,expectedfraction:e,sesskey:b.sessKey};a.post(b.baseUrl,f,function(b){if("success"===b.status){a("#updater-ef_"+d).text(b.ef);a("#updater-ef_"+d).parent().prev().text(b.gf);var e=a("#updater-ef_"+d).parent().parent();e.removeClass();e.addClass(b.rowclass);e.find("td[class=\"c3\"]").text(b.gf);var f=M.util.get_string("testquestionresultssummary","qtype_pmatch",b.counts);a("#testquestion_gradesummary").html(f)}else{window.console.log("Testquestion response updater has experienced an issue.\n"+b.data)}})}};return b});
//# sourceMappingURL=updater.min.js.map
